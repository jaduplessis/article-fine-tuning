<body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="dt ag du be ak b am an ao ap aq ar as at s u w i d q dv z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fbf8250d10825&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderCollection&amp;source=---two_column_layout_nav----------------------------------" rel="noopener follow">Open in app<svg class="ds" fill="none" height="10" viewbox="0 0 10 10" width="10"><path d="M.98 8.48a.37.37 0 1 0 .54.54l-.54-.54zm7.77-7.23h.38c0-.2-.17-.38-.38-.38v.38zM8.37 6.5a.37.37 0 1 0 .76 0h-.76zM3.5.87a.37.37 0 1 0 0 .76V.88zM1.52 9.03l7.5-7.5-.54-.54-7.5 7.5.54.54zm6.86-7.77V6.5h.74V1.25h-.74zm-4.88.38h5.25V.88H3.5v.74z" fill="currentColor"></path></svg></a><div class="ab q"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><button class="be b dw dx eg dy dz eh ea eb ei ej ed ek el ef em eo ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" data-testid="headerSignUpButton">Sign up</button></span></p><div class="aw l"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a aria-label="Homepage" class="af ag ah ai aj ak al am an ao ap aq ar as at ab" data-testid="headerMediumLogo" href="/?source=---two_column_layout_nav----------------------------------" rel="noopener follow"><svg class="au av" viewbox="0 0 3940 610"><path d="M594.79 308.2c0 163.76-131.85 296.52-294.5 296.52S5.8 472 5.8 308.2 137.65 11.69 300.29 11.69s294.5 132.75 294.5 296.51M917.86 308.2c0 154.16-65.93 279.12-147.25 279.12s-147.25-125-147.25-279.12S689.29 29.08 770.61 29.08s147.25 125 147.25 279.12M1050 308.2c0 138.12-23.19 250.08-51.79 250.08s-51.79-112-51.79-250.08 23.19-250.08 51.8-250.08S1050 170.09 1050 308.2M1862.77 37.4l.82-.18v-6.35h-167.48l-155.51 365.5-155.51-365.5h-180.48v6.35l.81.18c30.57 6.9 46.09 17.19 46.09 54.3v434.45c0 37.11-15.58 47.4-46.15 54.3l-.81.18V587H1327v-6.35l-.81-.18c-30.57-6.9-46.09-17.19-46.09-54.3V116.9L1479.87 587h11.33l205.59-483.21V536.9c-2.62 29.31-18 38.36-45.68 44.61l-.82.19v6.3h213.3v-6.3l-.82-.19c-27.71-6.25-43.46-15.3-46.08-44.61l-.14-445.2h.14c0-37.11 15.52-47.4 46.08-54.3m97.43 287.8c3.49-78.06 31.52-134.4 78.56-135.37 14.51.24 26.68 5 36.14 14.16 20.1 19.51 29.55 60.28 28.09 121.21zm-2.11 22h250v-1.05c-.71-59.69-18-106.12-51.34-138-28.82-27.55-71.49-42.71-116.31-42.71h-1c-23.26 0-51.79 5.64-72.09 15.86-23.11 10.7-43.49 26.7-60.45 47.7-27.3 33.83-43.84 79.55-47.86 130.93-.13 1.54-.24 3.08-.35 4.62s-.18 2.92-.25 4.39a332.64 332.64 0 0 0-.36 21.69C1860.79 507 1923.65 600 2035.3 600c98 0 155.07-71.64 169.3-167.8l-7.19-2.53c-25 51.68-69.9 83-121 79.18-69.76-5.22-123.2-75.95-118.35-161.63m532.69 157.68c-8.2 19.45-25.31 30.15-48.24 30.15s-43.89-15.74-58.78-44.34c-16-30.7-24.42-74.1-24.42-125.51 0-107 33.28-176.21 84.79-176.21 21.57 0 38.55 10.7 46.65 29.37zm165.84 76.28c-30.57-7.23-46.09-18-46.09-57V5.28L2424.77 60v6.7l1.14-.09c25.62-2.07 43 1.47 53.09 10.79 7.9 7.3 11.75 18.5 11.75 34.26v71.14c-18.31-11.69-40.09-17.38-66.52-17.38-53.6 0-102.59 22.57-137.92 63.56-36.83 42.72-56.3 101.1-56.3 168.81C2230 518.72 2289.53 600 2378.13 600c51.83 0 93.53-28.4 112.62-76.3V588h166.65v-6.66zm159.29-505.33c0-37.76-28.47-66.24-66.24-66.24-37.59 0-67 29.1-67 66.24s29.44 66.24 67 66.24c37.77 0 66.24-28.48 66.24-66.24m43.84 505.33c-30.57-7.23-46.09-18-46.09-57h-.13V166.65l-166.66 47.85v6.5l1 .09c36.06 3.21 45.93 15.63 45.93 57.77V588h166.8v-6.66zm427.05 0c-30.57-7.23-46.09-18-46.09-57V166.65L3082 212.92v6.52l.94.1c29.48 3.1 38 16.23 38 58.56v226c-9.83 19.45-28.27 31-50.61 31.78-36.23 0-56.18-24.47-56.18-68.9V166.66l-166.66 47.85V221l1 .09c36.06 3.2 45.94 15.62 45.94 57.77v191.27a214.48 214.48 0 0 0 3.47 39.82l3 13.05c14.11 50.56 51.08 77 109 77 49.06 0 92.06-30.37 111-77.89v66h166.66v-6.66zM3934.2 588v-6.67l-.81-.19c-33.17-7.65-46.09-22.07-46.09-51.43v-243.2c0-75.83-42.59-121.09-113.93-121.09-52 0-95.85 30.05-112.73 76.86-13.41-49.6-52-76.86-109.06-76.86-50.12 0-89.4 26.45-106.25 71.13v-69.87l-166.66 45.89v6.54l1 .09c35.63 3.16 45.93 15.94 45.93 57V588h155.5v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66V255.72c7-16.35 21.11-35.72 49-35.72 34.64 0 52.2 24 52.2 71.28V588h155.54v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66v-248a160.45 160.45 0 0 0-2.2-27.68c7.42-17.77 22.34-38.8 51.37-38.8 35.13 0 52.2 23.31 52.2 71.28V588z"></path></svg></a><div class="aw h"><div class="ab ax ay az ba q bb bc"><div aria-describedby="searchResults" aria-hidden="false" aria-labelledby="searchResults" class="bl"></div><div class="bm bn ab"><svg fill="none" height="24" viewbox="0 0 24 24" width="24"><path clip-rule="evenodd" d="M4.1 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0zm6.94-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .8-.79l-3.74-3.73A8.05 8.05 0 0 0 11.04 3v.01z" fill="currentColor" fill-rule="evenodd"></path></svg></div><input aria-controls="searchResults" aria-expanded="false" aria-label="search" class="ax bd be bf z bg bh bi bj bk" data-testid="headerSearchInput" placeholder="Search" role="combobox" tabindex="0" value=""/></div></div></div><div class="h k w ff fg"><div class="fh ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" href="/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---two_column_layout_nav-----------------------new_post_topnav-----------" rel="noopener follow"><div class="be b bf z dt fi fj ab q fk fl"><svg aria-label="Write" fill="none" height="24" viewbox="0 0 24 24" width="24"><path d="M14 4a.5.5 0 0 0 0-1v1zm7 6a.5.5 0 0 0-1 0h1zm-7-7H4v1h10V3zM3 4v16h1V4H3zm1 17h16v-1H4v1zm17-1V10h-1v10h1zm-1 1a1 1 0 0 0 1-1h-1v1zM3 20a1 1 0 0 0 1 1v-1H3zM4 3a1 1 0 0 0-1 1h1V3z" fill="currentColor"></path><path d="M17.5 4.5l-8.46 8.46a.25.25 0 0 0-.06.1l-.82 2.47c-.07.2.12.38.31.31l2.47-.82a.25.25 0 0 0 .1-.06L19.5 6.5m-2-2l2.32-2.32c.1-.1.26-.1.36 0l1.64 1.64c.1.1.1.26 0 .36L19.5 6.5m-2-2l2 2" stroke="currentColor"></path></svg><div class="ds l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fh ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" href="/search?source=---two_column_layout_nav----------------------------------" rel="noopener follow"><div class="be b bf z dt fi fj ab q fk fl"><svg aria-label="Search" fill="none" height="24" viewbox="0 0 24 24" width="24"><path clip-rule="evenodd" d="M4.1 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0zm6.94-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .8-.79l-3.74-3.73A8.05 8.05 0 0 0 11.04 3v.01z" fill="currentColor" fill-rule="evenodd"></path></svg></div></a></div></div><div class="fh h k j"><div class="ab q"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><button class="be b dw dx eg dy dz eh ea eb ei ej ed ek el ef em eo ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" data-testid="headerSignUpButton">Sign up</button></span></p><div class="aw l"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div aria-hidden="false" class="l"><button aria-label="user options menu" class="ax fm am ab q ao fn fo fp" data-testid="headerUserIcon"><div class="l fi"><img alt="" class="l fc bx by bz cw" height="32" loading="lazy" role="presentation" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32"/><div class="fq bx l by bz fr n ax fs"></div></div></button></div></div></div><div class="l"><div class="ft fu fv fw fx l"><div class="ab ca"><div class="ch bg fy fz ga gb"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fr gh gi gj gk gl"></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><div><h1 class="pw-post-title gr gs gt be gu gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht bj" data-testid="storyTitle" id="357b">Building a Robust Serverless Messaging Service with Amazon EventBridge Pipes and CDK</h1><div class="hu hv hw hx hy"><div class="speechify-ignore ab co"><div class="speechify-ignore bg l"><div class="hz ia ib ic id ab"><div><div class="ab ie"><a href="/@mattzcarey?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><div><div aria-hidden="false" class="bl"><div class="l if ig bx ih ii"><div class="l fi"><img alt="Matt Carey" class="l fc bx dc dd cw" data-testid="authorPhoto" height="44" loading="lazy" src="https://miro.medium.com/v2/resize:fill:88:88/1*Vtj4psWqT-bkJqsCrqISRA.jpeg" width="44"/><div class="ij bx l dc dd fr n ik fs"></div></div></div></div></div></a><a href="https://medium.com/serverless-transformation?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><div class="il ab fi"><div><div aria-hidden="false" class="bl"><div class="l im in bx ih io"><div class="l fi"><img alt="Serverless Transformation" class="l fc bx bq ip cw" data-testid="publicationPhoto" height="24" loading="lazy" src="https://miro.medium.com/v2/resize:fill:48:48/1*9dXX1IfF6H1ISqh3lflktQ.png" width="24"/><div class="ij bx l bq ip fr n ik fs"></div></div></div></div></div></div></a></div></div><div class="bm bg l"><div class="ab"><div style="flex:1"><span class="be b bf z bj"><div class="iq ab q"><div class="ab q ir"><div class="ab q"><div><div aria-hidden="false" class="bl"><p class="be b is it bj"><a class="af ag ah ai aj ak al am an ao ap aq ar iu" data-testid="authorName" href="/@mattzcarey?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow">Matt Carey</a></p></div></div></div><span aria-hidden="true" class="iv iw"><span class="be b bf z dt">·</span></span><p class="be b is it dt"><span><a class="ix iy ah ai aj ak al am an ao ap aq ar ew iz ja" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fac3f3140c69&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;user=Matt+Carey&amp;userId=ac3f3140c69&amp;source=post_page-ac3f3140c69----bf8250d10825---------------------post_header-----------" rel="noopener follow">Follow</a></span></p></div></div></span></div></div><div class="l jb"><span class="be b bf z dt"><div class="ab cm jc jd je"><div class="jf jg ab"><div class="be b bf z dt ab jh"><span class="ji l jb">Published in</span><div><div aria-hidden="false" class="bl"><a class="af ag ah ai aj ak al am an ao ap aq ar iu ab q" data-testid="publicationName" href="https://medium.com/serverless-transformation?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b bf z jj jk jl jm jn jo jp jq bj">Serverless Transformation</p></a></div></div></div><div class="h k"><span aria-hidden="true" class="iv iw"><span class="be b bf z dt">·</span></span></div></div><span class="be b bf z dt"><div class="ab ae"><span data-testid="storyReadTime">10 min read</span><div aria-hidden="true" class="jr js l"><span aria-hidden="true" class="l"><span class="be b bf z dt">·</span></span></div><span data-testid="storyPublishDate">Jan 20, 2023</span></div></span></div></span></div></div></div><div class="ab co jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki"><div class="h k w ff fg q"><div class="ky l"><div class="ab q kz"><div class="pw-multi-vote-icon fi ji la lb lc"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fserverless-transformation%2Fbf8250d10825&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;user=Matt+Carey&amp;userId=ac3f3140c69&amp;source=-----bf8250d10825---------------------clap_footer-----------" rel="noopener follow"><div><div aria-hidden="false" class="bl"><div class="ld ao le lf lg lh am li lj lk lc"><svg aria-label="clap" height="24" viewbox="0 0 24 24" width="24"><path clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z" fill-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ll lm ln lo lp lq lr"><p class="be b du z dt"><span class="ls">--</span></p></div></div></div><div><div aria-hidden="false" class="bl"><button aria-label="responses" class="ao ld lv lw ab q fj lx ly"><svg class="lu" height="24" viewbox="0 0 24 24" width="24"><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b du z dt"><span class="pw-responses-count lt lu">1</span></p></button></div></div></div><div class="ab q kj kk kl km kn ko kp kq kr ks kt ku kv kw kx"><div class="lz k j i d"></div><div class="h k"><div><div aria-hidden="false" class="bl"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbf8250d10825&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;source=-----bf8250d10825---------------------bookmark_footer-----------" rel="noopener follow"><svg aria-label="Add to list bookmark button" class="dt ma" fill="none" height="25" viewbox="0 0 25 25" width="25"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div><div class="fc mb cm"><div class="l ae"><div class="ab ca"><div class="mc md me mf mg mh ch bg"><div class="ab"><div aria-hidden="false" class="bl bg"><div><div aria-hidden="false" class="bl"><button aria-label="Listen" class="af fj ah ai aj ak al mi an ao ap ew mj mk ly ml mm mn mo mp s mq mr ms mt mu mv mw u mx my mz" data-testid="audioPlayButton"><svg fill="none" height="24" viewbox="0 0 24 24" width="24"><path clip-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0zm9-10a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm3.38 10.42l-4.6 3.06a.5.5 0 0 1-.78-.41V8.93c0-.4.45-.63.78-.41l4.6 3.06c.3.2.3.64 0 .84z" fill="currentColor" fill-rule="evenodd"></path></svg><div class="j i d"><p class="be b bf z dt">Listen</p></div></button></div></div></div></div></div></div></div></div><div aria-describedby="postFooterSocialMenu" aria-hidden="false" aria-labelledby="postFooterSocialMenu" class="bl"><div><div aria-hidden="false" class="bl"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" class="af fj ah ai aj ak al mi an ao ap ew mj mk ly ml mm mn mo mp s mq mr ms mt mu mv mw u mx my mz" data-testid="headerSocialShareButton"><svg fill="none" height="24" viewbox="0 0 24 24" width="24"><path clip-rule="evenodd" d="M15.22 4.93a.42.42 0 0 1-.12.13h.01a.45.45 0 0 1-.29.08.52.52 0 0 1-.3-.13L12.5 3v7.07a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V3.02l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.8a.42.42 0 0 1 .07.5zm-.1.14zm.88 2h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11a2 2 0 0 1-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.14c.1.1.15.22.15.35a.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9V8.96c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1z" fill="currentColor" fill-rule="evenodd"></path></svg><div class="j i d"><p class="be b bf z dt">Share</p></div></button></div></div></div></div></div></div></div></div></div><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="nj nk fi nl bg nm" role="button" tabindex="0"><div class="na nb nc"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*DgjbSQjtUSs1sVyBtZSXrg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*DgjbSQjtUSs1sVyBtZSXrg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*DgjbSQjtUSs1sVyBtZSXrg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*DgjbSQjtUSs1sVyBtZSXrg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*DgjbSQjtUSs1sVyBtZSXrg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*DgjbSQjtUSs1sVyBtZSXrg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DgjbSQjtUSs1sVyBtZSXrg.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*DgjbSQjtUSs1sVyBtZSXrg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*DgjbSQjtUSs1sVyBtZSXrg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*DgjbSQjtUSs1sVyBtZSXrg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*DgjbSQjtUSs1sVyBtZSXrg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*DgjbSQjtUSs1sVyBtZSXrg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*DgjbSQjtUSs1sVyBtZSXrg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*DgjbSQjtUSs1sVyBtZSXrg.png 1400w"/><img alt="" class="bg mh nn c" height="395" loading="eager" role="presentation" width="700"/></picture></div></div></figure><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="7539">EventBridge Pipes is a powerful new tool from Amazon Web Services (AWS) that makes it easy to move data between sources and targets while filtering, enriching and even transforming the data en route. EventBridge used to be a singular product, the EventBridge Bus. However, in the last few months, AWS has expanded it into a complete product suite for building event-driven applications, including; EventBuses, Pipes and Schedulers.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="4afa">High-scale messaging systems are traditionally complex to build. They must be able to handle a high volume of messages concurrently whilst ensuring that messages are not lost due to failures. In addition, they often require complex features such as routing, filtering, and transformation of messages, which can be challenging to implement and maintain. Pipes solves these problems by providing industry-leading horizontal scaling, redundancy with dead letter queues and inbuilt transformations, filtering and enrichment capabilities.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="7441">Using the Cloud Development Kit (CDK), we can build and deploy our messaging service without leaving our chosen development environment (in Typescript, too! Bye-bye AWS console and bye-bye writing YAML).</p><h1 class="om on gt be oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bj" id="0f38">Example Application</h1><p class="pw-post-body-paragraph no np gt nq b nr pk nt nu nv pl nx ny nz pm ob oc od pn of og oh po oj ok ol gm bj" id="aac8">We are building a web app with a fully serverless backend. We need a microservice that sends an email to the user whenever the user changes something security-related on their account, such as an address. This account data is stored in a DynamoDB table. The messaging service should construct and send an email to the user with identifying information about them and the change that has occurred.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="2a3a">ToAddresses: [userEmail]<br/><br/>Subject: `Notice: ${modifiedAttribute} Change Successful`<br/><br/>Body: `Dear ${firstName} ${lastName},<br/>    <br/>This is confirmation that your ${modifiedAttribute} for your account associated with this email address has been changed. <br/>If this is a change you made, we're good to go!<br/> <br/>If you did not personally request this change, please reset your password or contact support.`</span></pre><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="eed0">The catch is that the DynamoDB table the user has modified does not store names or email addresses, only a Cognito sub (user id). The Cognito User Pool is used as a single source of truth for security reasons and GDPR compliance. Therefore, we must query the rest of the information, such as name and email address, from Cognito directly.</p><blockquote class="qd qe qf"><p class="no np qg nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="72a7"><em class="gt">AWS Cognito is a user authentication and identity management service. It has its own data storage called User Pools which stores sign-up information. This is separate from the database, in this case, an AWS DynamoDB table.</em></p></blockquote><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="40bc">The DynamoDB table may store a projection of the user data maintained with event-driven updates. However, the DynamoDB table data will only be <a class="af qh" href="https://hackernoon.com/eventual-vs-strong-consistency-in-distributed-databases-282fdad37cf7" rel="noopener ugc nofollow" target="_blank">eventually constant, not strongly consistent</a>, and so cannot be relied upon apon for high-priority features.</p><h1 class="om on gt be oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bj" id="b31b"><strong class="al">What are Pipes?</strong></h1><p class="pw-post-body-paragraph no np gt nq b nr pk nt nu nv pl nx ny nz pm ob oc od pn of og oh po oj ok ol gm bj" id="08ea">AWS released Pipes on 1st December 2022. It makes life easier for developers to “create point-to-point integrations between event producers and consumers” while reducing the need for writing integration code. Essentially a Pipe automatically routes events from source to target, reducing the amount of extra code to write when building event-driven applications.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="d592">Less code means less maintenance and faster building times, making Pipes one of AWS’s most exciting features this year.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="7ce8"><strong class="nq gu">How are EventBridge Pipes different from EventBridge Buses?</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="9f56">Event buses are like post offices for AWS services. Different resources can send and receive messages or “events” to each other through this central service. Think of it as a middleman using forwarding rules to direct messages to the target services. For example, a user might change something on their account, which creates an event on the event bus. If the event matches a rule, then the rule target will be invoked and passed the event. This is a modern-day implementation of the <a class="af qh" href="https://www.ibm.com/topics/esb" rel="noopener ugc nofollow" target="_blank">Enterprise Service Bus</a> architectural pattern.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="bbd0">EventBridge Pipes, on the other hand, passes events from one AWS service directly to another. They allow you to connect an event source to a target service with no extra glue code needed. In addition, you can connect a Lambda function or other AWS service to manipulate or “enrich” the events before they reach the target. Pipes is essentially <a class="af qh" href="https://www.ibm.com/uk-en/cloud/learn/etl" rel="noopener ugc nofollow" target="_blank">ETL</a> as a managed AWS product. Optional filtering and event transformation are available directly in the Pipe, giving almost limitless flexibility to your serverless event-driven architecture.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="c5f9"><strong class="nq gu">Why use Pipes?</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="553d">The flexibility of Pipes makes it perfect for our messaging service. We have an event source needing to send an event to another AWS service. The event needs extra information fetching and adding somewhere along the flow. With Pipes, we can plug together each piece of infrastructure with minimal extra code. What’s more, these individual pieces of infrastructure do not have to be Pipe specific. As we will see later, a significant benefit of Pipes is that it allows us to reuse existing resources to create new event-driven patterns.</p><figure class="pp pq pr ps pt ni na nb paragraph-image"><div class="nj nk fi nl bg nm" role="button" tabindex="0"><div class="na nb qi"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*APIKRa0X0W7QAo7ZvGN9yQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*APIKRa0X0W7QAo7ZvGN9yQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*APIKRa0X0W7QAo7ZvGN9yQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*APIKRa0X0W7QAo7ZvGN9yQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*APIKRa0X0W7QAo7ZvGN9yQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*APIKRa0X0W7QAo7ZvGN9yQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*APIKRa0X0W7QAo7ZvGN9yQ.png 1400w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" srcset="https://miro.medium.com/v2/resize:fit:640/1*APIKRa0X0W7QAo7ZvGN9yQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*APIKRa0X0W7QAo7ZvGN9yQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*APIKRa0X0W7QAo7ZvGN9yQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*APIKRa0X0W7QAo7ZvGN9yQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*APIKRa0X0W7QAo7ZvGN9yQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*APIKRa0X0W7QAo7ZvGN9yQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*APIKRa0X0W7QAo7ZvGN9yQ.png 1400w"/><img alt="" class="bg mh nn c" height="160" loading="lazy" role="presentation" width="700"/></picture></div></div><figcaption class="qj fe qk na nb ql qm be b bf z dt">EventBridge Pipes as described in AWS console</figcaption></figure><h1 class="om on gt be oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bj" id="e213"><strong class="al">Building the Architecture</strong></h1><p class="pw-post-body-paragraph no np gt nq b nr pk nt nu nv pl nx ny nz pm ob oc od pn of og oh po oj ok ol gm bj" id="ec43">To build the Pipe, we must first choose a source producing the event. In our case, this is the DynamoDB stream of the table.</p><blockquote class="qd qe qf"><p class="no np qg nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="a889"><em class="gt">DynamoDB Streams is a feature of Amazon DynamoDB that allows you to capture changes to the data in a DynamoDB table in near real-time.</em></p></blockquote><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="01fd">Next, we can specify a filter to only process events in the Pipe that match the rule. AWS does not charge for events that are filtered out before the enrichment step, so it’s better to do as much of the filtering here rather than later on. That being said, Pipes is super cheap. 5 million requests/month post filtering will cost you a grand total of $2.00. That is 60% cheaper than EventBridge Bus events costing a whopping $5.00 for the same number of events. Prices are correct in us-east-1 as of time of writing, see <a class="af qh" href="https://aws.amazon.com/eventbridge/pricing/" rel="noopener ugc nofollow" target="_blank">here</a> for the current pricing per region.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="1b45">To send an email, we need to get the user details, such as; first name, last name, and email, which are stored in Cognito. With Pipes, we can enrich the events using AWS Lambda, amongst several other services. In this case, we should use a Lambda function to query the user id in the Cognito User Pool. The beauty of EventBridge Pipes is that, since this is a reasonably common access pattern, we probably already have this exact Lambda function in our architecture. All that is needed is to specify the function ARN to the Pipe.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="bfe7">Finally, we need to pick a target destination. Pipes supports all the major AWS services, including Amazon Step Functions, Kinesis Data Streams, AWS Lambda, and third-party APIs using EventBridge API destinations as targets. In our case, we will send the event to an SQS queue. Using a queue, we can restrict message throughput and protect the email service from overloading. We can also store messages in a dead letter queue in the event of downtime of the email service.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="abb0">An email Lambda which will construct and send the email with SES, can be triggered as an event source of the queue.</p><figure class="pp pq pr ps pt ni na nb paragraph-image"><div class="na nb qn"><picture><source sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 691px" srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*IQBjEbnLjUyAdVhKWsomag.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*IQBjEbnLjUyAdVhKWsomag.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*IQBjEbnLjUyAdVhKWsomag.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*IQBjEbnLjUyAdVhKWsomag.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*IQBjEbnLjUyAdVhKWsomag.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*IQBjEbnLjUyAdVhKWsomag.png 1100w, https://miro.medium.com/v2/resize:fit:1382/format:webp/1*IQBjEbnLjUyAdVhKWsomag.png 1382w" type="image/webp"/><source data-testid="og" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 691px" srcset="https://miro.medium.com/v2/resize:fit:640/1*IQBjEbnLjUyAdVhKWsomag.png 640w, https://miro.medium.com/v2/resize:fit:720/1*IQBjEbnLjUyAdVhKWsomag.png 720w, https://miro.medium.com/v2/resize:fit:750/1*IQBjEbnLjUyAdVhKWsomag.png 750w, https://miro.medium.com/v2/resize:fit:786/1*IQBjEbnLjUyAdVhKWsomag.png 786w, https://miro.medium.com/v2/resize:fit:828/1*IQBjEbnLjUyAdVhKWsomag.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*IQBjEbnLjUyAdVhKWsomag.png 1100w, https://miro.medium.com/v2/resize:fit:1382/1*IQBjEbnLjUyAdVhKWsomag.png 1382w"/><img alt="" class="bg mh nn c" height="378" loading="lazy" role="presentation" width="691"/></picture></div><figcaption class="qj fe qk na nb ql qm be b bf z dt">Architecture diagram</figcaption></figure><h1 class="om on gt be oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bj" id="1410"><strong class="al">Infrastructure as Code (IaC)</strong></h1><p class="pw-post-body-paragraph no np gt nq b nr pk nt nu nv pl nx ny nz pm ob oc od pn of og oh po oj ok ol gm bj" id="0e84">For this project, we are using CDK for IaC. CDK allows us to write IaC in imperative programming languages such as TypeScript or Python rather than declarative ones such as YAML or JSON. This means developers can take advantage of features such as code editor support for syntax highlighting, formatters and linters. Type safety provides added security and helps catch errors easily. IaC written in these familiar languages will be more comprehensible and readable to most developers than in YAML. CDK also has the added benefit of being open source, so bugs, issues and new features are all in the public domain.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="bdac">CDK released the L1 construct for Pipes in v2.55 back in December 2022. Unfortunately, the L2 construct is still in progress, so we will have to manually specify most of the CloudFormation template but bear with me, it won’t be too painful. The community is working on an L2 construct; you can find the issue on GitHub <a class="af qh" href="https://github.com/aws/aws-cdk-rfcs/issues/473" rel="noopener ugc nofollow" target="_blank">here</a>.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="abef"><em class="qg">Please check out the example repo linked at the end of this article for the project structure. The aim with the code snippets below is to give you the information to be able to implement Pipes into your own project not a quick start guide to CDK. I can recommend </em><a class="af qh" href="/serverless-transformation/easily-provision-your-cloud-infrastructure-as-code-with-aws-cdk-6e75213550e3" rel="noopener"><em class="qg">this article</em></a><em class="qg"> for an intro to CDK.</em></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="8191"><strong class="nq gu">DynamoDB</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="0f64">The table is created as shown below. Note the use of generic Partition and Sort keys “PK” and “SK” as recommended by <a class="af qh" href="https://www.alexdebrie.com/posts/dynamodb-one-to-many/" rel="noopener ugc nofollow" target="_blank">Alex DeBrie</a> and the inclusion of the “stream” attribute to create the DynamoDB stream. Here I have used “RemovalPolicy.DESTROY” as it is a development table. In production you would want to “RETAIN” the table.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="f6eb">const sourceTable = new Table(this, 'example-table-id', {<br/>  tableName: 'example-table',<br/>  partitionKey: { name: 'PK', type: AttributeType.STRING },<br/>  sortKey: { name: 'SK', type: AttributeType.STRING },<br/>  stream: StreamViewType.NEW_AND_OLD_IMAGES,<br/>  billingMode: BillingMode.PAY_PER_REQUEST,<br/>  removalPolicy: RemovalPolicy.DESTROY,<br/>  pointInTimeRecovery: true,<br/>});</span></pre><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="cca5"><strong class="nq gu">Lambdas</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="18fc">The infrastructure for Lambda is generic so we won’t include it here but please see the included repo if you are interested. The code for the enrichment Lambda handler function is found below. Here you can see the DynamoDB “NewImage” being compared to the “OldImage” to determine modified table attributes. The “getUser” function queries the “userId” in Cognito. A string is returned by the enrichment Lambda and is piped straight into the target SQS messaging queue body.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="9b09">export const handler = async (event: DynamoDBStreamEvent): Promise&lt;string&gt; =&gt; {<br/>  const record: DynamoDBRecord = event.Records[0];<br/><br/>  if (record.dynamodb?.NewImage == null &amp;&amp; record.dynamodb?.OldImage == null) {<br/>    throw new Error('No NewImage or OldImage found');<br/>  }<br/><br/>  const modifiedAttributes: string[] = [];<br/>  for (const key in record.dynamodb.NewImage) {<br/>    if (record.dynamodb.NewImage[key].S !== record.dynamodb.OldImage?.[key].S) {<br/>      modifiedAttributes.push(key);<br/>    }<br/>  }<br/><br/>  if (modifiedAttributes.length === 0) {<br/>    throw new Error('No changed parameters found');<br/>  }<br/><br/>  const userId = record.dynamodb.NewImage?.userId.S;<br/><br/>  if (userId == null) {<br/>    throw new Error('No userId found');<br/>  }<br/><br/>  const user = await getUser(userId);<br/><br/>  return JSON.stringify({<br/>    ...user,<br/>    modifiedAttributes,<br/>  } as MessageBody);<br/>};</span></pre><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="2da1"><strong class="nq gu">SQS</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="ac86">The IaC for creating the queue is trivial.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="7156">const queue = new Queue(this, 'ExampleQueue', {<br/>  queueName: buildResourceName('example-queue'),<br/>});</span></pre><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="112d">Remember to create an event source and add the email Lambda function to it. The “batchSize” is the number of queue messages consumed by the target per target invocation. Setting it to 1 means, we only have to deal with 1 message per invocation of the email Lambda. If you are concerned about the throughput of the queue, you could increase “batchSize”, but you would have to add loops to the email Lambda to process each message individually.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="5bee">const eventSource = new SqsEventSource(props.targetQueue, {<br/>  batchSize: 1,<br/>});<br/><br/>emailLambda.addEventSource(eventSource);</span></pre><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="65d2"><strong class="nq gu">EventBridge Pipes</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="2170">Let’s create a role for the Pipe to assume. We need to give permissions to read the DynamoDB stream, execute a Lambda and send a message to SQS. We will pass the sourceTable, enrichmentLambda, and targetQueue as props from other stacks.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="1638">const pipesRole = new Role(this, 'PipesRole', {<br/>  roleName: 'PipesRole',<br/>  assumedBy: new ServicePrincipal('pipes.amazonaws.com'),<br/>  inlinePolicies: {<br/>    PipesDynamoDBStream: new PolicyDocument({<br/>      statements: [<br/>        new PolicyStatement({<br/>          actions: [<br/>            'dynamodb:DescribeStream',<br/>            'dynamodb:GetRecords',<br/>            'dynamodb:GetShardIterator',<br/>            'dynamodb:ListStreams',<br/>          ],<br/>          resources: [props.sourceTable.tableStreamArn],<br/>          effect: Effect.ALLOW,<br/>        }),<br/>      ],<br/>    }),<br/>    PipesLambdaExecution: new PolicyDocument({<br/>      statements: [<br/>        new PolicyStatement({<br/>          actions: ['lambda:InvokeFunction'],<br/>          resources: [props.enrichmentLambda.functionArn],<br/>          effect: Effect.ALLOW,<br/>        }),<br/>      ],<br/>    }),<br/>    PipesSQSSendMessage: new PolicyDocument({<br/>      statements: [<br/>        new PolicyStatement({<br/>          actions: ['sqs:SendMessage', 'sqs:GetQueueAttributes'],<br/>          resources: [props.targetQueue.queueArn],<br/>          effect: Effect.ALLOW,<br/>        }),<br/>      ],<br/>    }),<br/>  },<br/>});</span></pre><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="77c6">Next, in the same stack, let us specify the Pipe itself. Note the “sourceParameters” attribute. Some targets also require extra “targetParameters”. Here we set the batch size of the stream as 1 for convenience for testing, but as long as it’s less than the batch size of the target queue, you’ll never have an issue.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="4702">new CfnPipe(this, 'MessagingPipe', {<br/>  name: 'MessagingPipe',<br/>  roleArn: pipesRole.roleArn,<br/>  source: props.sourceTable.tableStreamArn,<br/>  sourceParameters: {<br/>    dynamoDbStreamParameters: {<br/>      startingPosition: 'LATEST',<br/>      batchSize: 1,<br/>    },<br/>  },<br/>  enrichment: props.enrichmentLambda.functionArn,<br/>  target: props.targetQueue.queueArn,<br/>});</span></pre><h1 class="om on gt be oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bj" id="adf8"><strong class="al">How could the Architecture be Improved?</strong></h1><p class="pw-post-body-paragraph no np gt nq b nr pk nt nu nv pl nx ny nz pm ob oc od pn of og oh po oj ok ol gm bj" id="0422"><strong class="nq gu">Filtering Options</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="c2e6">Filtering of the source event in CDK is available under the “sourceParameters” props for CfnPipe. An example of how you might filter events to only leave those where one or more attributes are modified and “someAttribute” is present in the “NewImage” of the table can be seen below.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="fbcd">{<br/>"eventName": [{<br/> "prefix": "MODIFY"<br/> }],<br/>  "dynamodb": {<br/>    "NewImage": {<br/>      "someAttribute": {<br/>        "S": [{<br/>          "exists": true<br/>        }]<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="ecf9">This will remove the vast majority of events but will still leave some filtering to be done in the enrichment Lambda function. AWS actually open-sourced the event-ruler which powers these filters. You can find the repo <a class="af qh" href="https://github.com/aws/event-ruler" rel="noopener ugc nofollow" target="_blank">here</a>.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="46b4">In the future, I hope the EventBridge team and the open-source community will improve the filtering capabilities to allow you to compare exact table values. Being able to do something like this below would be really handy to avoid overpaying for events you don’t want.</p><pre class="pp pq pr ps pt pu pv pw bo px ba bj"><span class="py on gt pv b bf pz qa l qb qc" id="01c9">{<br/>"eventName": [{<br/> "prefix": "MODIFY"<br/> }],<br/>  "dynamodb": {<br/>    "NewImage": {<br/>      "someAttribute": {<br/>        "S": [{<br/>          "not-equals": &lt;$.OldImage.someAttribute.S&gt;<br/>        }]<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="7f17"><strong class="nq gu">Best Practice</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="2fab">Speaking with the AWS Pipes team, they told me they would prefer if users return JSON instead of strings from the enrichment Lambda and use transformations available in the console to parse the event. However, I’m not a fan of the console, especially for large applications with multiple environments, so I’m waiting for the transformation attribute to be available in CloudFormation and CDK before the swap to do this.</p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="8424"><strong class="nq gu">Future Improvements to Pipes</strong></p><p class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj" id="25fb">The next feature we are waiting for is CloudWatch logs for Pipes. We’ve been informed it’s a priority and is actively being worked on. It should dramatically improve the developer experience working with EventBridge Pipes. The same goes for cross-account capabilities. We build a lot of multi-account architectures, so using a Pipe instead of a direct Lambda invocation would simplify them in many cases.</p><h1 class="om on gt be oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bj" id="14bf">Summary</h1><p class="pw-post-body-paragraph no np gt nq b nr pk nt nu nv pl nx ny nz pm ob oc od pn of og oh po oj ok ol gm bj" id="cdd6">In conclusion, Amazon EventBridge Pipes offers a practical solution for building a robust serverless messaging service. Pipes allow developers to easily connect event sources and targets while filtering and enriching events, using existing infrastructure and reducing the need for additional code and maintenance. For example, it is possible to connect a DynamoDB stream as the event source, filter and enrich the events with information from Cognito using a Lambda function, and then send the event to an SQS queue for email delivery. <strong class="nq gu">This flexible and powerful feature makes EventBridge Pipes ideal for building serverless, event-driven architectures.</strong></p><h1 class="om on gt be oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bj" id="187b">Resources and Code</h1><ul class=""><li class="no np gt nq b nr pk nt nu nv pl nx ny nz pm ob oc od pn of og oh po oj ok ol qo qp qq bj" id="bfa6"><a class="af qh" href="https://github.com/mattzcarey/pipes-example-cdk" rel="noopener ugc nofollow" target="_blank">The example repo</a></li><li class="no np gt nq b nr qr nt nu nv qs nx ny nz qt ob oc od qu of og oh qv oj ok ol qo qp qq bj" id="19e1"><a class="af qh" href="https://serverlessland.com/patterns?services=eventbridge-pipes" rel="noopener ugc nofollow" target="_blank">Open-source patterns with EventBridge Pipes</a></li><li class="no np gt nq b nr qr nt nu nv qs nx ny nz qt ob oc od qu of og oh qv oj ok ol qo qp qq bj" id="bedd"><a class="af qh" href="https://aws.amazon.com/eventbridge/pipes/" rel="noopener ugc nofollow" target="_blank">Amazon EventBridge Pipes Documentation</a></li></ul></div></div></div></div></section></div></div></article><div class="ab ca"><div class="ch bg fy fz ga gb"></div></div></div><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="qw qx ab je"><div class="qy ab"><a class="qz ax am ao" href="/tag/eventbridge?source=post_page-----bf8250d10825---------------eventbridge-----------------" rel="noopener follow"><div class="ra fi cw rb gd rc rd be b bf z bj re">Eventbridge</div></a></div><div class="qy ab"><a class="qz ax am ao" href="/tag/eventbridge-pipes?source=post_page-----bf8250d10825---------------eventbridge_pipes-----------------" rel="noopener follow"><div class="ra fi cw rb gd rc rd be b bf z bj re">Eventbridge Pipes</div></a></div><div class="qy ab"><a class="qz ax am ao" href="/tag/serverless?source=post_page-----bf8250d10825---------------serverless-----------------" rel="noopener follow"><div class="ra fi cw rb gd rc rd be b bf z bj re">Serverless</div></a></div><div class="qy ab"><a class="qz ax am ao" href="/tag/aws?source=post_page-----bf8250d10825---------------aws-----------------" rel="noopener follow"><div class="ra fi cw rb gd rc rd be b bf z bj re">AWS</div></a></div><div class="qy ab"><a class="qz ax am ao" href="/tag/microservices?source=post_page-----bf8250d10825---------------microservices-----------------" rel="noopener follow"><div class="ra fi cw rb gd rc rd be b bf z bj re">Microservices</div></a></div></div></div></div><div class="l"></div><footer class="rf rg rh ri rj rk rl rm rn ab q ro io c"><div class="l ae"><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="ab co rp"><div class="ab q kz"><div class="rq l"><span class="l rr rs rt e d"><div class="ab q kz"><div class="pw-multi-vote-icon fi ji la lb lc"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fserverless-transformation%2Fbf8250d10825&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;user=Matt+Carey&amp;userId=ac3f3140c69&amp;source=-----bf8250d10825---------------------clap_footer-----------" rel="noopener follow"><div><div aria-hidden="false" class="bl"><div class="ld ao le lf lg lh am li lj lk lc"><svg aria-label="clap" height="24" viewbox="0 0 24 24" width="24"><path clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z" fill-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ll lm ln lo lp lq lr"><p class="be b du z dt"><span class="ls">--</span></p></div></div></span><span class="l h g f ru rv"><div class="ab q kz"><div class="pw-multi-vote-icon fi ji la lb lc"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fserverless-transformation%2Fbf8250d10825&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;user=Matt+Carey&amp;userId=ac3f3140c69&amp;source=-----bf8250d10825---------------------clap_footer-----------" rel="noopener follow"><div><div aria-hidden="false" class="bl"><div class="ld ao le lf lg lh am li lj lk lc"><svg aria-label="clap" height="24" viewbox="0 0 24 24" width="24"><path clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z" fill-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ll lm ln lo lp lq lr"><p class="be b du z dt"><span class="ls">--</span></p></div></div></span></div><div class="bp ab"><div><div aria-hidden="false" class="bl"><button aria-label="responses" class="ao ld lv lw ab q fj lx ly"><svg class="lu" height="24" viewbox="0 0 24 24" width="24"><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b bf z dt"><span class="pw-responses-count lt lu">1</span></p></button></div></div></div></div><div class="ab q"><div class="rw l jb"><div><div aria-hidden="false" class="bl"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fbf8250d10825&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;source=--------------------------bookmark_footer-----------" rel="noopener follow"><svg aria-label="Add to list bookmark button" class="dt ma" fill="none" height="25" viewbox="0 0 25 25" width="25"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div><div class="rw l jb"><div aria-describedby="postFooterSocialMenu" aria-hidden="false" aria-labelledby="postFooterSocialMenu" class="bl"><div><div aria-hidden="false" class="bl"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" class="af fj ah ai aj ak al mi an ao ap ew mj mk ly ml" data-testid="footerSocialShareButton"><svg fill="none" height="24" viewbox="0 0 24 24" width="24"><path clip-rule="evenodd" d="M15.22 4.93a.42.42 0 0 1-.12.13h.01a.45.45 0 0 1-.29.08.52.52 0 0 1-.3-.13L12.5 3v7.07a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V3.02l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.8a.42.42 0 0 1 .07.5zm-.1.14zm.88 2h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11a2 2 0 0 1-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.14c.1.1.15.22.15.35a.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9V8.96c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1z" fill="currentColor" fill-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="rx ry rz sa sb l bw"><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="ck ab sc co"><div class="ab ie"><a href="/@mattzcarey?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><div class="l sd se bx sf ii"><div class="l fi"><img alt="Matt Carey" class="l fc bx sg sh cw" height="72" loading="lazy" src="https://miro.medium.com/v2/resize:fill:144:144/1*Vtj4psWqT-bkJqsCrqISRA.jpeg" width="72"/><div class="ij bx l sg sh fr n ik fs"></div></div></div></a><a href="https://medium.com/serverless-transformation?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><div class="si ab fi"><div><div aria-hidden="false" class="bl"><div class="l sj sk bx sf io"><div class="l fi"><img alt="Serverless Transformation" class="l fc bx by bz cw" height="32" loading="lazy" src="https://miro.medium.com/v2/resize:fill:64:64/1*9dXX1IfF6H1ISqh3lflktQ.png" width="32"/><div class="ij bx l by bz fr n ik fs"></div></div></div></div></div></div></a></div><div class="j i d"><div class="ab"><span><button class="be b bf z eo ra ep eq er es et eu ev ew ex ey ez sl fa fb fc bl fd fe">Follow</button></span><div class="ds l"><div><div><div aria-hidden="false" class="bl"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F652f994b255b&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;newsletterV3=ac3f3140c69&amp;newsletterV3Id=652f994b255b&amp;user=Matt+Carey&amp;userId=ac3f3140c69&amp;source=-----bf8250d10825---------------------subscribe_user-----------" rel="noopener follow"><button aria-label="Subscribe" class="be b bf z sn am so sp sq sr ss st su sv ev ew ex ey ez fa fb fc bl fd fe"><svg class="sm sk sj" fill="none" height="38" viewbox="0 0 38 38" width="38"><rect height="6.5" rx="0.25" width="0.5" x="26.25" y="9.25"></rect><rect height="6.5" rx="0.25" transform="rotate(90 29.75 12.25)" width="0.5" x="29.75" y="12.25"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5L19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="ab cm co"><div class="l"><div class="ab q"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab q" href="/@mattzcarey?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><h2 class="pw-author-name be sw sx sy sz bj"><span class="gm">Written by <!-- -->Matt Carey</span></h2></a></div><div class="qy ab"><div class="l jb"><span class="pw-follower-count be b bf z bj"><a class="af ag ah ai aj ak al am an ao ap aq ar iu" href="/@mattzcarey/followers?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow">23 Followers</a></span></div><div class="be b bf z jj jk jl ab jn jo jp jq dt jh"><span aria-hidden="true" class="iv l"><span class="be b bf z dt">·</span></span><span class="l jb">Writer for </span><div><div aria-hidden="false" class="bl"><a class="af ag ah ai aj ak al am an ao ap aq ar iu ab q" href="https://medium.com/serverless-transformation?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b bf z jj jk jl jm jn jo jp jq bj">Serverless Transformation</p></a></div></div></div></div><div class="ta l"><p class="be b bf z bj"><span class="gm">AI Engineer @ StackOne | AWS Community Builder</span></p></div></div><div class="h k"><div class="ab"><span><button class="be b bf z eo ra ep eq er es et eu ev ew ex ey ez sl fa fb fc bl fd fe">Follow</button></span><div class="ds l"><div><div><div aria-hidden="false" class="bl"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F652f994b255b&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fserverless-transformation%2Fbuilding-a-robust-serverless-messaging-service-with-amazon-eventbridge-pipes-and-cdk-bf8250d10825&amp;newsletterV3=ac3f3140c69&amp;newsletterV3Id=652f994b255b&amp;user=Matt+Carey&amp;userId=ac3f3140c69&amp;source=-----bf8250d10825---------------------subscribe_user-----------" rel="noopener follow"><button aria-label="Subscribe" class="be b bf z sn am so sp sq sr ss st su sv ev ew ex ey ez fa fb fc bl fd fe"><svg class="sm sk sj" fill="none" height="38" viewbox="0 0 38 38" width="38"><rect height="6.5" rx="0.25" width="0.5" x="26.25" y="9.25"></rect><rect height="6.5" rx="0.25" transform="rotate(90 29.75 12.25)" width="0.5" x="29.75" y="12.25"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5L19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="tb bg tc nd ne nf ng nh"></div></div></div><div class="h k j"><div class="tb bg tc td"></div><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="te ab kz je"><div class="tf tg l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">Help</p></a></div><div class="tf tg l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">Status</p></a></div><div class="tf tg l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="/about?autoplay=1&amp;source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">About</p></a></div><div class="tf tg l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">Careers</p></a></div><div class="tf tg l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">Blog</p></a></div><div class="tf tg l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">Privacy</p></a></div><div class="tf tg l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">Terms</p></a></div><div class="tf tg l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">Text to speech</p></a></div><div class="tf l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="/business?source=post_page-----bf8250d10825--------------------------------" rel="noopener follow"><p class="be b du z dt">Teams</p></a></div></div></div></div></div></div></div></div></div></div>
</body>